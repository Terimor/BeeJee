(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{107:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(17),o=a.n(r),s=a(6),i=a(7),c=a(9),u=a(8),m=a(10),d=a(39),h=a(59),p=a(109),g=a(27),v=a(12),E=a.n(v);var f=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).login=function(){a.state.login&&a.state.password?E.a.post("/?action=login",{login:a.state.login,password:a.state.password}).then((function(e){e.data.result?window.location.reload():alert(e.data.message)})):alert("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u044f!")},a.state={login:"",password:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=function(){e.props.onHide()};return l.a.createElement(p.a,{onHide:t,show:this.props.show,size:"lg","aria-labelledby":"contained-modal-title-vcenter",backdrop:"static",keyboard:!1,centered:!0},l.a.createElement(p.a.Header,{closeButton:!0},l.a.createElement(p.a.Title,{id:"contained-modal-title-vcenter"},"\u0412\u0445\u043e\u0434")),l.a.createElement(p.a.Body,null,l.a.createElement("h5",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0443\u0447\u0435\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"login_login"},"\u041f\u043e\u0447\u0442\u0430"),l.a.createElement("input",{className:"form-control",value:this.state.login,onChange:function(t){return e.setState({login:t.target.value})}})),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"login_password"},"\u041f\u0430\u0440\u043e\u043b\u044c"),l.a.createElement("input",{className:"form-control",type:"password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}}))),l.a.createElement(p.a.Footer,null,l.a.createElement(g.a,{variant:"light",onClick:t},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),l.a.createElement(g.a,{variant:"success",onClick:this.login},"\u0412\u043e\u0439\u0442\u0438")))}}]),t}(l.a.Component),k=l.a.createContext({is_admin:0,tasks_per_page:0}),b=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onModalHide=function(){a.setState({modalShow:!1})},a.onModalShow=function(){a.setState({modalShow:!0})},a.state={modalShow:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=+this.context.is_admin?l.a.createElement("a",{href:"/?action=logout"},l.a.createElement("i",{className:"fa fa-lg fa-sign-out cursor-pointer","aria-hidden":"true"}),"\u0412\u044b\u0439\u0442\u0438"):l.a.createElement("span",{className:"cursor-pointer",onClick:this.onModalShow},l.a.createElement("i",{className:"fa fa-lg fa-sign-in","aria-hidden":"true"}),"\u0412\u043e\u0439\u0442\u0438");return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,{bg:"dark",variant:"dark",className:"d-flex justify-content-between"},l.a.createElement(d.a.Brand,null,"\u0417\u0430\u0434\u0430\u0447\u043d\u0438\u043a"),l.a.createElement(h.a,{className:"header-icons d-flex"},l.a.createElement("span",{className:"cursor-pointer"},e))),l.a.createElement(f,{onHide:this.onModalHide,show:this.state.modalShow}))}}]),t}(l.a.Component);b.contextType=k;var _=b,C=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).saveMessage=function(){a.props.onEditSave(a.state.text)},a.state={text:a.props.text},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(p.a,{onHide:this.props.onHide,show:this.props.show,size:"lg","aria-labelledby":"contained-modal-title-vcenter",backdrop:"static",keyboard:!1,centered:!0},l.a.createElement(p.a.Header,{closeButton:!0},l.a.createElement(p.a.Title,{id:"contained-modal-title-vcenter"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435")),l.a.createElement(p.a.Body,null,l.a.createElement("h5",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u0442\u0435\u043a\u0441\u0442 \u0437\u0430\u0434\u0430\u043d\u0438\u044f"),l.a.createElement("textarea",{className:"form-control",value:this.state.text,onChange:function(t){return e.setState({text:t.target.value})}})),l.a.createElement(p.a.Footer,null,l.a.createElement(g.a,{variant:"light",onClick:this.props.onHide},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),l.a.createElement(g.a,{variant:"success",onClick:this.saveMessage},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))}}]),t}(l.a.Component),j=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).editTask=function(e){e||a.props.task.text?E.a.put("/?controller=Admin_api&action=editTaskText",{id:a.props.task.id,text:e}).then((function(e){var t=e.data;t.result?(a.modalHide(),alert("\u0417\u0430\u0434\u0430\u0447\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430!"),a.props.reloadTasks()):alert(t.message)})):alert("\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u0434\u0430\u0447\u0438 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c!")},a.completeTask=function(){E.a.put("/?controller=Admin_api&action=completeTask&id="+a.props.task.id).then((function(e){var t=e.data;t.result?(a.modalHide(),alert("\u0417\u0430\u0434\u0430\u0447\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430!"),a.props.reloadTasks()):alert(t.message)}))},a.modalShow=function(){a.setState({modalShow:!0})},a.modalHide=function(){a.setState({modalShow:!1})},a.state={modalShow:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=!!+this.context.is_admin,t=this.props.task,a=!!+t.status;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"task-container",style:{backgroundColor:a?"green":"grey"}},l.a.createElement("div",{className:"m-3"},l.a.createElement("h4",null,"\u0417\u0430\u0434\u0430\u0447\u0430 #",t.id),l.a.createElement("h5",null,"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f - ",t.user_name),l.a.createElement("h5",null,"\u041f\u043e\u0447\u0442\u0430 - ",t.user_email),l.a.createElement("h5",null,"\u0417\u0430\u0434\u0430\u0447\u0430: "),l.a.createElement("div",{className:"task-text-container"},t.text),e&&l.a.createElement(g.a,{variant:"danger",onClick:this.modalShow},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),a?l.a.createElement("h6",null,"\u0417\u0430\u0434\u0430\u0447\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430"):e&&l.a.createElement(g.a,{variant:"success",onClick:this.completeTask},"\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c"),!!+t.is_edited&&l.a.createElement("legend",null,"\u041e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u043e\u043c"))),l.a.createElement(C,{show:this.state.modalShow,onHide:this.modalHide,onEditSave:this.editTask,text:t.text}))}}]),t}(l.a.Component);j.contextType=k;var x=j,y=a(38),O=a.n(y),w=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).addTask=function(){a.state.user_name&&a.state.user_email&&a.state.text?E.a.post("/?controller=Common_api&action=addTask",a.state).then((function(e){var t=e.data;t.result?a.setState({text:""},(function(){alert("\u0417\u0430\u0434\u0430\u0447\u0430 \u0431\u044b\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430!"),a.props.reloadTasks()})):alert(t.message)})):alert("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f!")},a.state={user_name:"",user_email:"",text:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("label",null,"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f"),l.a.createElement("input",{className:"form-control",type:"text",placeholder:"\u0418\u0432\u0430\u043d \u0418\u0432\u0430\u043d\u043e\u0432",value:this.state.user_name,onChange:function(t){return e.setState({user_name:t.target.value})}})),l.a.createElement("div",null,l.a.createElement("label",null,"\u0412\u0430\u0448\u0435 \u043f\u043e\u0447\u0442\u0430"),l.a.createElement("input",{className:"form-control",type:"text",placeholder:"example@example.com",value:this.state.user_email,onChange:function(t){return e.setState({user_email:t.target.value})}})),l.a.createElement("div",null,l.a.createElement("label",null,"\u0422\u0435\u043a\u0441\u0442"),l.a.createElement("textarea",{className:"form-control",placeholder:"\u0417\u0430\u0434\u0430\u0447\u0430...",value:this.state.text,onChange:function(t){return e.setState({text:t.target.value})}})),l.a.createElement(g.a,{variant:"success",onClick:this.addTask},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))}}]),t}(l.a.Component),S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).getTasks=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];E.a.post("/?controller=Common_api&action=getTasks",{order:a.state.order,page:e||a.state.page}).then((function(e){a.setState({tasks:e.data.tasks,total_amount:e.data.total_amount})}))},a.pageChange=function(e){a.setState({page:e},a.getTasks)},a.orderChange=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState((function(a){return{order:{order_by:e||a.order.order_by,direction:t||a.order.direction}}}),(function(){return a.getTasks()}))},a.state={tasks:[],total_amount:0,order:{order_by:"id",direction:"DESC"},page:1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getTasks()}},{key:"render",value:function(){var e=this,t=this.state.tasks.map((function(t){return l.a.createElement(x,{task:t,key:t.id,reloadTasks:e.getTasks})}));return l.a.createElement("div",{className:"content-field"},l.a.createElement(w,{reloadTasks:this.getTasks}),l.a.createElement("div",{className:"d-flex flex-column align-items-center my-3"},l.a.createElement("h3",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u0434\u0430\u0447:"),l.a.createElement("div",{className:"my-2"},l.a.createElement("h4",null,"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430"),l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("label",null,"\u041f\u043e\u043b\u0435"),l.a.createElement("select",{className:"form-control",value:this.state.order.order_by,onChange:function(t){return e.orderChange(t.target.value,!1)}},l.a.createElement("option",{value:"id"},"ID"),l.a.createElement("option",{value:"user_name"},"\u0418\u043c\u044f"),l.a.createElement("option",{value:"user_email"},"\u041f\u043e\u0447\u0442\u0430"),l.a.createElement("option",{value:"status"},"\u0421\u0442\u0430\u0442\u0443\u0441")),l.a.createElement("label",null,"\u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435"),l.a.createElement("select",{className:"form-control",value:this.state.order.direction,onChange:function(t){return e.orderChange(!1,t.target.value)}},l.a.createElement("option",{value:"DESC"},"\u041d\u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0430\u044f"),l.a.createElement("option",{value:"ASC"},"\u0412\u043e\u0441\u0445\u043e\u0434\u044f\u0449\u0430\u044f")))),this.state.total_amount>3&&l.a.createElement(O.a,{activePage:this.state.page,itemsCountPerPage:this.context.tasks_per_page,totalItemsCount:this.state.total_amount,pageRangeDisplayed:5,onChange:this.pageChange,itemClass:"page-item",linkClass:"page-link"}),t.length?t:l.a.createElement("h5",null,"\u041f\u043e\u043a\u0430 \u043f\u0443\u0441\u0442\u043e :("),this.state.total_amount>3&&l.a.createElement(O.a,{activePage:this.state.page,itemsCountPerPage:this.context.tasks_per_page,totalItemsCount:this.state.total_amount,pageRangeDisplayed:5,onChange:this.pageChange,itemClass:"page-item",linkClass:"page-link"})))}}]),t}(l.a.Component);S.contextType=k;var T=S,N=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={is_admin:0,tasks_per_page:0},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.a.get("/?controller=Common_api&action=getInitInfo").then((function(t){var a=t.data;e.setState({is_admin:a.is_admin,tasks_per_page:a.tasks_per_page})}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(k.Provider,{value:this.state},l.a.createElement(_,null),l.a.createElement(T,null)))}}]),t}(l.a.Component);o.a.render(l.a.createElement(N,null),document.getElementById("root"))},61:function(e,t,a){e.exports=a(107)}},[[61,1,2]]]);
//# sourceMappingURL=main.945d70ed.chunk.js.map